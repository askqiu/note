# 参数传递攻击代码
在 URL 中使用 `&` 符号来分隔不同的查询参数，这是 URL 编码的标准做法。==在 AngularJS 应用中，如果应用的某个部分（如控制器、服务或指令）负责解析和处理 URL 查询参数，那么这些参数可能会被 AngularJS 的表达式解析器处理。==

在这个特定的例子中，攻击者构造了一个特殊的 URL，其中包含了恶意代码。这个恶意代码被设计为能够绕过 AngularJS 的沙箱保护机制。当这个 URL 被加载到浏览器中时，AngularJS 应用会尝试解析 URL 中的查询参数。

由于 AngularJS 的设计，它可能会对这些参数进行表达式求值，尤其是在使用 `{{ }}` 绑定或其他类似机制时。攻击者利用了这一点，通过在查询参数中插入恶意的 AngularJS 表达式，试图在应用中执行代码。

这个表达式 `toString().constructor.prototype.charAt%3d[].join;[1]|orderBy:toString().constructor.fromCharCode(120,61,97,108,101,114,116,40,49,41)=1` 被设计为：

1. 覆盖 `String.prototype.charAt` 方法，从而破坏 AngularJS 的沙箱机制。
2. 使用 `orderBy` 过滤器作为执行恶意代码的手段。
3. 通过 `fromCharCode` 方法构造一个恶意的表达式，这个表达式在沙箱被破坏后可以被执行。

当 AngularJS 应用解析这个 URL 并尝试执行其中的表达式时，由于沙箱已经被逃逸，恶意代码得以执行。

这种行为是危险的，因为它允许攻击者在不受信任的环境中执行任意代码。这也是为什么现代 Web 应用需要采取多种安全措施来防止 XSS 攻击，包括但不限于：

- 对用户输入进行严格的验证和清理。
- 使用内容安全策略（CSP）来限制可以执行的代码类型。
- 保持框架和库的更新，以利用最新的安全修复。
- 避免在 URL 中直接使用不受信任的数据。

在实际应用中，开发者应该避免将不受信任的数据直接用于表达式求值，并且应该在处理 URL 查询参数时格外小心。如果需要将查询参数用于 AngularJS 表达式，应该确保它们是安全的，或者使用 AngularJS 提供的 `$sce` 服务来创建安全的对象。
